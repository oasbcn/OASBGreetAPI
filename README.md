# OASB GreetAPI

OASB GreetAPIï¼Œä¸€ä¸ªåŸºäºFlaskçš„æ™ºèƒ½é—®å€™æœåŠ¡å¹³å°APIï¼Œä¸“æ³¨äºæä¾›å‹å¥½æ¬¢è¿æ¥å£çš„å¼€æºé¡¹ç›®ï¼Œé€‚ç”¨äºå„ç§åº”ç”¨ç¨‹åºï¼Œç®€åŒ–ç”¨æˆ·äº¤äº’ä½“éªŒã€‚

## è·å–ä»£ç 

### æ–¹å¼ä¸€ï¼šç›´æ¥ä¸‹è½½
ä»githubä¸‹è½½ZIPå‹ç¼©åŒ…ï¼š
```bash
[https://github.com/oasb/greetapi/repository/archive/master.zip](https://github.com/oasbcn/OASBGreetAPI/archive/refs/heads/main.zip)
```

### æ–¹å¼äºŒï¼šä½¿ç”¨Gitå…‹éš†
```bash
[git clone https://github.com/oasb/greetapi.git](https://github.com/oasbcn/OASBGreetAPI.git)
```

## åŠŸèƒ½ç‰¹æ€§

- **æ™ºèƒ½æ—¶é—´é—®å€™**ï¼šæ ¹æ®å½“å‰æ—¶é—´è¿”å›ä¸åŒçš„é—®å€™è¯­ï¼ˆæ—©ä¸Šå¥½/ä¸­åˆå¥½/ä¸‹åˆå¥½/æ™šä¸Šå¥½ï¼‰
- **éšæœºå¿ƒæƒ…æŒ‡æ•°**ï¼šæ¯æ¬¡è¯·æ±‚è¿”å›80-100ä¹‹é—´çš„éšæœºå¿ƒæƒ…æŒ‡æ•°
- **æ¯æ—¥æ¸©é¦¨æç¤º**ï¼šéšæœºæä¾›å¥åº·ã€å·¥ä½œã€ç”Ÿæ´»ç­‰æ–¹é¢çš„å®ç”¨å°è´´å£«
- **åäººåè¨€**ï¼šéšæœºè¿”å›åŠ±å¿—æ ¼è¨€
- **ä¸ªæ€§åŒ–æ¨è**ï¼šæ ¹æ®ç”¨æˆ·å–œå¥½å‚æ•°è¿”å›å®šåˆ¶åŒ–å†…å®¹
- **æœåŠ¡çŠ¶æ€ç›‘æ§**ï¼šå®æ—¶è·Ÿè¸ªæœåŠ¡è¿è¡ŒçŠ¶æ€å’Œè¯·æ±‚ç»Ÿè®¡

## ç»Ÿè®¡ä¿¡æ¯æŒä¹…åŒ–å­˜å‚¨

### ç»Ÿè®¡æ–‡ä»¶è¯´æ˜
- ç»Ÿè®¡ä¿¡æ¯è‡ªåŠ¨ä¿å­˜åœ¨ä¸´æ—¶æ–‡ä»¶ä¸­ï¼š`{tempfile.gettempdir()}/flask_api_stats.json`
- æ–‡ä»¶æ ¼å¼ä¸ºJSONï¼ŒåŒ…å«å®Œæ•´çš„æœåŠ¡è¿è¡Œç»Ÿè®¡
- æ”¯æŒé€šè¿‡`--keep-stats`å‚æ•°ä¿ç•™å†å²ç»Ÿè®¡ä¿¡æ¯

### ç»Ÿè®¡æ–‡ä»¶æ ¼å¼
```json
{
  "start_time": "ISOæ ¼å¼æ—¶é—´",
  "total_requests": æ€»æ•°,
  "last_request_time": "æœ€åè¯·æ±‚æ—¶é—´",
  "active_connections": æ´»è·ƒè¿æ¥æ•°,
  "request_methods": {"GET": æ•°é‡, "POST": æ•°é‡},
  "status_codes": {"200": æ•°é‡, "404": æ•°é‡},
  "endpoints": {"/api/greeting": è°ƒç”¨æ¬¡æ•°},
  "errors": [{"time": "é”™è¯¯æ—¶é—´", "error": "é”™è¯¯ä¿¡æ¯"}]
}
```

## æ–°å¢åŠŸèƒ½ï¼šæœåŠ¡çŠ¶æ€ç›‘æ§

### æœåŠ¡çŠ¶æ€ç›‘æ§æ¥å£

#### ç»Ÿè®¡åŠŸèƒ½è¯´æ˜
- ç»Ÿè®¡ä¿¡æ¯ä¼šè‡ªåŠ¨ä¿å­˜åˆ°ä¸´æ—¶æ–‡ä»¶ä¸­ï¼Œç¡®ä¿å¤šè¿›ç¨‹é—´åŒæ­¥
- é»˜è®¤æƒ…å†µä¸‹ï¼ŒæœåŠ¡é‡å¯æ—¶ä¼šé‡ç½®ç»Ÿè®¡ä¿¡æ¯
- ä½¿ç”¨`--keep-stats`å‚æ•°å¯ä»¥ä¿ç•™ä¸Šæ¬¡è¿è¡Œçš„ç»Ÿè®¡ä¿¡æ¯

#### ä½¿ç”¨ç¤ºä¾‹
```bash
# å¯åŠ¨æœåŠ¡å¹¶ä¿ç•™ç»Ÿè®¡ä¿¡æ¯
python main.py --keep-stats

# å¯åŠ¨æœåŠ¡å¹¶é‡ç½®ç»Ÿè®¡ä¿¡æ¯ï¼ˆé»˜è®¤è¡Œä¸ºï¼‰
python main.py
```

#### çŠ¶æ€ç›‘æ§æ¥å£
`/status`ç«¯ç‚¹æä¾›è¯¦ç»†çš„ç»Ÿè®¡ä¿¡æ¯ï¼š

```json
{
  "status": "running",
  "version": "v1.2.0",
  "start_time": "2023-11-15 14:20:10",
  
  "basic_stats": {
    "uptime": "0:10:32.123456",
    "total_requests": 42,
    "active_connections": 3,
    "last_request": "2023-11-15 14:30:22"
  },
  
  "detailed_stats": {
    "request_methods": {
      "GET": 35,
      "POST": 7
    },
    "status_codes": {
      "200": 38,
      "400": 3,
      "404": 1
    },
    "popular_endpoints": {
      "greeting": 25,
      "status": 10,
      "index": 7
    }
  },
  
  "recent_errors": [
    {
      "time": "2023-11-15 14:25:10",
      "error": "Invalid parameter: name cannot be empty"
    }
  ]
}
```

#### ç»Ÿè®¡ä¿¡æ¯è¯´æ˜

1. åŸºæœ¬ç»Ÿè®¡ï¼ˆbasic_statsï¼‰
   - `uptime`: æœåŠ¡è¿è¡Œæ—¶é•¿
   - `total_requests`: æ€»è¯·æ±‚æ•°
   - `active_connections`: å½“å‰æ´»è·ƒè¿æ¥æ•°
   - `last_request`: æœ€åè¯·æ±‚æ—¶é—´

2. è¯¦ç»†ç»Ÿè®¡ï¼ˆdetailed_statsï¼‰
   - `request_methods`: å„ç§HTTPæ–¹æ³•çš„ä½¿ç”¨æ¬¡æ•°
   - `status_codes`: å„ç§HTTPçŠ¶æ€ç çš„å‡ºç°æ¬¡æ•°
   - `popular_endpoints`: æœ€å—æ¬¢è¿çš„APIç«¯ç‚¹åŠå…¶è®¿é—®æ¬¡æ•°

3. é”™è¯¯è®°å½•ï¼ˆrecent_errorsï¼‰
   - ä¿ç•™æœ€è¿‘10æ¡é”™è¯¯è®°å½•
   - åŒ…å«é”™è¯¯å‘ç”Ÿæ—¶é—´å’Œé”™è¯¯ä¿¡æ¯

### æœåŠ¡åœæ­¢æŠ¥å‘Š
å½“æœåŠ¡åœæ­¢æ—¶ï¼Œä¼šæ˜¾ç¤ºè¯¦ç»†çš„è¿è¡Œç»Ÿè®¡ä¿¡æ¯ï¼š

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           æœåŠ¡ç»ˆæ­¢é€šçŸ¥           
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¸ ç»ˆæ­¢çŠ¶æ€: æ­£å¸¸åœæ­¢ âœ“
â–¸ æœåŠ¡ç‰ˆæœ¬: v1.2.0
â–¸ è¿è¡Œæ—¶é•¿: 2å°æ—¶ 15åˆ† 30ç§’

â–¸ å¯åŠ¨æ—¶é—´: 2023-11-15 14:20:10
â–¸ åœæ­¢æ—¶é—´: 2023-11-15 16:35:40

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
           æœåŠ¡ç»Ÿè®¡ä¿¡æ¯           
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¸ ç´¯è®¡å¤„ç†è¯·æ±‚: 128
â–¸ æœ€åè¯·æ±‚æ—¶é—´: 2023-11-15 16:35:22

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  æ„Ÿè°¢ä½¿ç”¨è¶…çº§ä¸ªæ€§åŒ–é—®å€™APIæœåŠ¡  
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### ç›‘æ§ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | æè¿° |
|------|------|------|
| `/status` | GET | è·å–æœåŠ¡è¿è¡ŒçŠ¶æ€å’Œç»Ÿè®¡ä¿¡æ¯ |

### æœåŠ¡çŠ¶æ€å­—æ®µè¯´æ˜

| å­—æ®µ | ç±»å‹ | æè¿° |
|------|------|------|
| status | string | æœåŠ¡çŠ¶æ€(running/stopped) |
| uptime | string | æœåŠ¡è¿è¡Œæ—¶é•¿ |
| total_requests | integer | ç´¯è®¡å¤„ç†è¯·æ±‚æ•° |
| active_connections | integer | å½“å‰æ´»è·ƒè¿æ¥æ•° |
| last_request | string | æœ€åè¯·æ±‚æ—¶é—´ |
| start_time | string | æœåŠ¡å¯åŠ¨æ—¶é—´ |
| version | string | APIç‰ˆæœ¬å· |

## å®Œæ•´çš„å‘½ä»¤è¡Œå‚æ•°

| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|------|
| `--host` | æœåŠ¡ç›‘å¬åœ°å€ | 0.0.0.0 |
| `--port` | æœåŠ¡ç›‘å¬ç«¯å£ | 5000 |
| `--debug` | å¯ç”¨è°ƒè¯•æ¨¡å¼ | False |
| `--keep-stats` | ä¿ç•™ä¸Šæ¬¡è¿è¡Œçš„ç»Ÿè®¡ä¿¡æ¯ | False |

## é”™è¯¯å¤„ç†å’Œæ•…éšœæ’é™¤ ğŸ”§

### é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | ç±»å‹ | è¯´æ˜ | è§£å†³æ–¹æ¡ˆ |
|--------|------|------|----------|
| 400 | ValidationError | è¯·æ±‚å‚æ•°éªŒè¯å¤±è´¥ | æ£€æŸ¥å‚æ•°æ ¼å¼å’Œå€¼æ˜¯å¦ç¬¦åˆè¦æ±‚ |
| 404 | NotFoundError | è¯·æ±‚çš„èµ„æºä¸å­˜åœ¨ | ç¡®è®¤APIè·¯å¾„æ˜¯å¦æ­£ç¡® |
| 429 | RateLimitError | è¯·æ±‚é¢‘ç‡è¶…é™ | é™ä½è¯·æ±‚é¢‘ç‡æˆ–ç”³è¯·æ›´é«˜é…é¢ |
| 500 | ServerError | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—æˆ–è”ç³»æŠ€æœ¯æ”¯æŒ |

### å¸¸è§é—®é¢˜è§£å†³

#### 1. æœåŠ¡æ— æ³•å¯åŠ¨
- æ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼š
```bash
# Windows
netstat -ano | findstr :5000
# Linux/Mac
lsof -i :5000
```
- ç¡®è®¤Pythonç¯å¢ƒå’Œä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
- æ£€æŸ¥æ—¥å¿—æ–‡ä»¶ä¸­çš„é”™è¯¯ä¿¡æ¯

#### 2. å“åº”é€Ÿåº¦æ…¢
- æ£€æŸ¥æœåŠ¡å™¨è´Ÿè½½æƒ…å†µ
- ç¡®è®¤ç½‘ç»œè¿æ¥çŠ¶æ€
- æŸ¥çœ‹ç¼“å­˜ä½¿ç”¨æƒ…å†µ
- è€ƒè™‘ä½¿ç”¨æ€§èƒ½åˆ†æå·¥å…·

#### 3. è¯·æ±‚å¤±è´¥
- éªŒè¯è¯·æ±‚å‚æ•°æ ¼å¼
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—
- ç¡®è®¤APIç‰ˆæœ¬å…¼å®¹æ€§

### æ—¥å¿—è¯´æ˜

#### æ—¥å¿—ä½ç½®
- åº”ç”¨æ—¥å¿—ï¼š`./logs/app.log`
- é”™è¯¯æ—¥å¿—ï¼š`./logs/error.log`
- è®¿é—®æ—¥å¿—ï¼š`./logs/access.log`

#### æ—¥å¿—æ ¼å¼
```
[æ—¶é—´æˆ³] [æ—¥å¿—çº§åˆ«] [è¯·æ±‚ID] æ¶ˆæ¯å†…å®¹
```

#### æ—¥å¿—çº§åˆ«
- DEBUGï¼šè°ƒè¯•ä¿¡æ¯
- INFOï¼šä¸€èˆ¬ä¿¡æ¯
- WARNINGï¼šè­¦å‘Šä¿¡æ¯
- ERRORï¼šé”™è¯¯ä¿¡æ¯
- CRITICALï¼šä¸¥é‡é”™è¯¯

### ç›‘æ§å»ºè®®

1. ç³»ç»Ÿç›‘æ§
   - CPUä½¿ç”¨ç‡
   - å†…å­˜å ç”¨
   - ç£ç›˜ç©ºé—´
   - ç½‘ç»œæµé‡

2. åº”ç”¨ç›‘æ§
   - è¯·æ±‚å“åº”æ—¶é—´
   - é”™è¯¯ç‡
   - å¹¶å‘è¿æ¥æ•°
   - ç¼“å­˜å‘½ä¸­ç‡

3. æ—¥å¿—ç›‘æ§
   - é”™è¯¯æ—¥å¿—é¢‘ç‡
   - å¼‚å¸¸ç±»å‹ç»Ÿè®¡
   - æ€§èƒ½æŒ‡æ ‡è¶‹åŠ¿
   - è®¿é—®æ¨¡å¼åˆ†æ

## ç”Ÿäº§ç¯å¢ƒå»ºè®®

1. ä½¿ç”¨Nginxä½œä¸ºåå‘ä»£ç†
2. å¯ç”¨`--keep-stats`å‚æ•°æŒä¹…åŒ–ç»Ÿè®¡ä¿¡æ¯
3. ç›‘æ§`/status`ç«¯ç‚¹è·å–æœåŠ¡å¥åº·çŠ¶æ€
4. å®šæœŸæ£€æŸ¥é”™è¯¯æ—¥å¿—
5. å»ºè®®ä½¿ç”¨Gunicornæˆ–uWSGIä½œä¸ºWSGIæœåŠ¡å™¨
6. é…ç½®æ—¥å¿—è½®è½¬é˜²æ­¢æ—¥å¿—æ–‡ä»¶è¿‡å¤§

## å¼€å‘è¯´æ˜

- ç»Ÿè®¡ä¿¡æ¯åœ¨å¤šè¿›ç¨‹é—´è‡ªåŠ¨åŒæ­¥
- æ‰€æœ‰è¯·æ±‚éƒ½ä¼šè¢«è®°å½•ï¼ŒåŒ…æ‹¬é™æ€æ–‡ä»¶è¯·æ±‚
- è°ƒè¯•æ¨¡å¼ä¸‹ä¼šæ˜¾ç¤ºæ›´è¯¦ç»†çš„æ—¥å¿—ä¿¡æ¯
- é¡¹ç›®ä½¿ç”¨ä»¥ä¸‹æŠ€æœ¯æ ˆï¼š
  - Python 3.7+
  - Flaskæ¡†æ¶
  - Flask-Cachingæ‰©å±•
  - Coloramaç»ˆç«¯é¢œè‰²è¾“å‡º

## æ•ˆæœé¢„è§ˆ


![æœåŠ¡å¯åŠ¨ç•Œé¢](docs/images/startup.png)

*æœåŠ¡å¯åŠ¨ç•Œé¢å±•ç¤º*

![APIè°ƒç”¨ç¤ºä¾‹](docs/images/dy.png)

*APIè°ƒç”¨æ•ˆæœå±•ç¤º*

![æœåŠ¡çŠ¶æ€ç›‘æ§](docs/images/end.png)

*æœåŠ¡çŠ¶æ€ç›‘æ§ç•Œé¢*

## é…ç½®è¯´æ˜ âš™ï¸

### é…ç½®æ–‡ä»¶
é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„`config.json`æ–‡ä»¶ç”¨äºé…ç½®æœåŠ¡çš„å„é¡¹å‚æ•°ã€‚ä½ å¯ä»¥å¤åˆ¶`config.example.json`å¹¶é‡å‘½åä¸º`config.json`æ¥å¼€å§‹é…ç½®ï¼š

```bash
cp config.example.json config.json
```

### é…ç½®é¡¹è¯´æ˜

#### 1. æœåŠ¡å™¨é…ç½® (server)
```json
{
  "server": {
    "host": "0.0.0.0",    // æœåŠ¡ç›‘å¬åœ°å€
    "port": 5000,         // æœåŠ¡ç«¯å£
    "debug": false,       // æ˜¯å¦å¼€å¯è°ƒè¯•æ¨¡å¼
    "keep_stats": true    // æ˜¯å¦ä¿ç•™ç»Ÿè®¡ä¿¡æ¯
  }
}
```

#### 2. æ—¥å¿—é…ç½® (logging)
```json
{
  "logging": {
    "level": "INFO",      // æ—¥å¿—çº§åˆ«
    "format": "[%(asctime)s] %(levelname)s: %(message)s",
    "file": {
      "enabled": true,    // æ˜¯å¦å¯ç”¨æ–‡ä»¶æ—¥å¿—
      "path": "./logs/app.log",
      "max_size": "10MB", // å•ä¸ªæ—¥å¿—æ–‡ä»¶æœ€å¤§å¤§å°
      "backup_count": 5   // ä¿ç•™çš„æ—¥å¿—æ–‡ä»¶æ•°é‡
    }
  }
}
```

#### 3. ç¼“å­˜é…ç½® (cache)
```json
{
  "cache": {
    "enabled": true,      // æ˜¯å¦å¯ç”¨ç¼“å­˜
    "type": "simple",     // ç¼“å­˜ç±»å‹
    "default_timeout": 300, // ç¼“å­˜è¿‡æœŸæ—¶é—´ï¼ˆç§’ï¼‰
    "threshold": 500      // ç¼“å­˜æ¡ç›®æ•°ä¸Šé™
  }
}
```

#### 4. APIé…ç½® (api)
```json
{
  "api": {
    "version": "v1.2.0",  // APIç‰ˆæœ¬
    "rate_limit": {
      "enabled": true,    // æ˜¯å¦å¯ç”¨è¯·æ±‚é™åˆ¶
      "requests": 60,     // å…è®¸çš„è¯·æ±‚æ•°
      "per_minutes": 1    // æ—¶é—´çª—å£ï¼ˆåˆ†é’Ÿï¼‰
    }
  }
}
```

#### 5. åŠŸèƒ½é…ç½® (features)
```json
{
  "features": {
    "emoji_enabled": true,     // æ˜¯å¦å¯ç”¨è¡¨æƒ…
    "quote_language": "zh",    // åè¨€è¯­è¨€
    "tips_enabled": true,      // æ˜¯å¦å¯ç”¨æç¤º
    "mood_index": true        // æ˜¯å¦å¯ç”¨å¿ƒæƒ…æŒ‡æ•°
  }
}
```

### ç¯å¢ƒå˜é‡é…ç½®
é™¤äº†ä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥è¦†ç›–é…ç½®ï¼š

```bash
# æœåŠ¡å™¨é…ç½®
export API_HOST=0.0.0.0
export API_PORT=5000
export API_DEBUG=false

# æ—¥å¿—é…ç½®
export LOG_LEVEL=INFO
export LOG_FILE_ENABLED=true

# ç¼“å­˜é…ç½®
export CACHE_ENABLED=true
export CACHE_TIMEOUT=300

# åŠŸèƒ½å¼€å…³
export EMOJI_ENABLED=true
export TIPS_ENABLED=true
```

## å¿«é€Ÿå¼€å§‹

### è·å–ä»£ç 

#### æ–¹å¼ä¸€ï¼šç›´æ¥ä¸‹è½½
ä»githubä¸‹è½½ZIPå‹ç¼©åŒ…ï¼š
```bash
[https://github.com/oasb/greetapi/repository/archive/master.zip](https://github.com/oasbcn/OASBGreetAPI/archive/refs/heads/main.zip)
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨Gitå…‹éš†
```bash
[git clone https://github.com/oasb/greetapi.git](https://github.com/oasbcn/OASBGreetAPI.git)
```

### å®‰è£…æ–¹å¼

#### æ–¹å¼ä¸€ï¼šç›´æ¥å®‰è£…ï¼ˆç®€å•æ–¹å¼ï¼‰
```bash
# ç›´æ¥å®‰è£…æ‰€éœ€ä¾èµ–
pip install flask flask-caching colorama pytz
```

#### æ–¹å¼äºŒï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èæ–¹å¼ï¼‰
```bash
# 1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# 2. æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windowsç³»ç»Ÿ:
venv\Scripts\activate
# Linux/Macç³»ç»Ÿ:
source venv/bin/activate

# 3. å®‰è£…ä¾èµ–
pip install flask flask-caching colorama pytz

# 4. é€€å‡ºè™šæ‹Ÿç¯å¢ƒï¼ˆä½¿ç”¨å®Œæ¯•åï¼‰
deactivate
```

### ç¯å¢ƒè¦æ±‚
- Python 3.7+
- pip 20.0+
- Windows/Linux/MacOS å‡å¯è¿è¡Œ

### ä¾èµ–è¯´æ˜
- `flask`: Webæ¡†æ¶æ ¸å¿ƒåŒ…
- `flask-caching`: Flaskçš„ç¼“å­˜æ‰©å±•
- `pytz`: æ—¶åŒºå¤„ç†åº“
- `colorama`: ç»ˆç«¯é¢œè‰²æ”¯æŒ

### æ³¨æ„äº‹é¡¹

#### ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒçš„ä¼˜åŠ¿
1. é¡¹ç›®ä¾èµ–éš”ç¦»ï¼Œé¿å…ç‰ˆæœ¬å†²çª
2. ä¾¿äºç®¡ç†ä¸åŒé¡¹ç›®çš„ä¾èµ–
3. æ–¹ä¾¿è¿ç§»å’Œéƒ¨ç½²
4. ä¸å½±å“ç³»ç»Ÿçš„Pythonç¯å¢ƒ

#### ç›´æ¥å®‰è£…çš„æ³¨æ„äº‹é¡¹
1. ä¾èµ–ä¼šå®‰è£…åˆ°ç³»ç»Ÿçš„Pythonç¯å¢ƒä¸­
2. å¯èƒ½ä¸å…¶ä»–é¡¹ç›®çš„ä¾èµ–äº§ç”Ÿå†²çª
3. é€‚åˆå¿«é€Ÿæµ‹è¯•æˆ–ä¸´æ—¶ä½¿ç”¨

#### å¸¸è§é—®é¢˜è§£å†³
1. å¦‚æœå®‰è£…æ—¶æç¤ºæƒé™é”™è¯¯ï¼š
   ```bash
   # Windowsä¸‹ä½¿ç”¨ç®¡ç†å‘˜æƒé™è¿è¡Œ
   # Linux/Macä¸‹ä½¿ç”¨sudo
   sudo pip install flask flask-caching colorama pytz
   ```

2. å¦‚æœæç¤ºpipå‘½ä»¤æœªæ‰¾åˆ°ï¼š
   ```bash
   # ç¡®ä¿pipå·²å®‰è£…
   python -m ensurepip --upgrade
   ```

3. å¦‚æœé‡åˆ°ç‰ˆæœ¬å†²çªï¼š
   ```bash
   # ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒå¯ä»¥é¿å…æ­¤é—®é¢˜
   # æˆ–è€…ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å¼ºåˆ¶æ›´æ–°
   pip install --upgrade flask flask-caching colorama pytz
   ```

æ³¨æ„ï¼šå…¶ä»–å¯¼å…¥çš„æ¨¡å—ï¼ˆå¦‚jsonã€tempfileã€randomç­‰ï¼‰éƒ½æ˜¯Pythonæ ‡å‡†åº“çš„ä¸€éƒ¨åˆ†ï¼Œæ— éœ€é¢å¤–å®‰è£…ã€‚

## å¯åŠ¨æœåŠ¡

### åŸºæœ¬å¯åŠ¨
```bash
# ä½¿ç”¨é»˜è®¤é…ç½®å¯åŠ¨
python main.py

# æŒ‡å®šç«¯å£å¯åŠ¨
python main.py --port 8080

# æŒ‡å®šä¸»æœºå’Œç«¯å£å¯åŠ¨
python main.py --host 0.0.0.0 --port 8080
```

### å¯åŠ¨å‚æ•°è¯´æ˜
- `--host`: æŒ‡å®šä¸»æœºåœ°å€ï¼Œé»˜è®¤ä¸º 127.0.0.1
- `--port`: æŒ‡å®šç«¯å£å·ï¼Œé»˜è®¤ä¸º 5000
- `--debug`: å¯ç”¨è°ƒè¯•æ¨¡å¼ï¼Œæ˜¾ç¤ºè¯¦ç»†æ—¥å¿—

## ä½¿ç”¨ç¤ºä¾‹

### 1. è·å–é—®å€™è¯­
```bash
# ä½¿ç”¨curlå‘é€è¯·æ±‚
curl http://localhost:5000/api/v1/greet

# è¿”å›ç¤ºä¾‹
{
    "greeting": "ä¸‹åˆå¥½ï¼ä»Šå¤©é˜³å…‰æ˜åªšï¼Œæ„¿ä½ å¿ƒæƒ…æ„‰æ‚¦ï¼",
    "mood_index": 85,
    "quote": "ç”Ÿæ´»ä¸­æœ€ç¾å¥½çš„äº‹ç‰©éƒ½æ˜¯å…è´¹çš„ã€‚",
    "timestamp": "2024-01-01 14:30:00"
}
```

### 2. æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
# è®¿é—®çŠ¶æ€ç›‘æ§æ¥å£
curl http://localhost:5000/api/v1/status

# è¿”å›ç¤ºä¾‹
{
    "status": "running",
    "uptime": "2h 30m",
    "requests_total": 1500,
    "cache_hits": 450,
    "system_load": "normal"
}
```

### 3. è‡ªå®šä¹‰é—®å€™
```bash
# å‘é€å¸¦å‚æ•°çš„è¯·æ±‚
curl "http://localhost:5000/api/v1/greet?name=å°æ˜"

# è¿”å›ç¤ºä¾‹
{
    "greeting": "ä¸‹åˆå¥½ï¼Œå°æ˜ï¼ç¥ä½ åº¦è¿‡æ„‰å¿«çš„ä¸€å¤©ï¼",
    "mood_index": 90,
    "quote": "å¾®ç¬‘æ˜¯æœ€å¥½çš„åç‰‡ã€‚",
    "timestamp": "2024-01-01 14:35:00"
}
```

## ç›‘æ§å’Œç»´æŠ¤

### æŸ¥çœ‹æœåŠ¡æ—¥å¿—
```bash
# æ—¥å¿—æ–‡ä»¶ä½äº logs ç›®å½•
tail -f logs/app.log
```

### æ€§èƒ½ç›‘æ§
- è®¿é—® `/api/v1/status` æŸ¥çœ‹å®æ—¶çŠ¶æ€
- æŸ¥çœ‹ `logs/performance.log` äº†è§£è¯¦ç»†æ€§èƒ½æŒ‡æ ‡
- ç›‘æ§ç¼“å­˜å‘½ä¸­ç‡å’Œç³»ç»Ÿè´Ÿè½½

### æ•…éšœæ’é™¤
1. å¦‚æœæœåŠ¡æ— æ³•å¯åŠ¨ï¼Œæ£€æŸ¥ï¼š
   - ç«¯å£æ˜¯å¦è¢«å ç”¨
   - æƒé™æ˜¯å¦è¶³å¤Ÿ
   - ä¾èµ–æ˜¯å¦å®‰è£…å®Œæ•´

2. å¦‚æœå“åº”è¾ƒæ…¢ï¼Œæ£€æŸ¥ï¼š
   - ç³»ç»Ÿè´Ÿè½½æƒ…å†µ
   - ç¼“å­˜ä½¿ç”¨æƒ…å†µ
   - ç½‘ç»œè¿æ¥çŠ¶æ€

## API æ–‡æ¡£

### åŸºç¡€ä¿¡æ¯
- åŸºç¡€URLï¼š`http://localhost:5000`
- ç‰ˆæœ¬ï¼šv1
- å“åº”æ ¼å¼ï¼šJSON
- ç¼–ç ï¼šUTF-8

### æ¥å£åˆ—è¡¨

#### 1. è·å–é—®å€™è¯­
```http
GET /api/v1/greet
```

**å‚æ•°ï¼š**
| å‚æ•°å | ç±»å‹ | å¿…é€‰ | æè¿° |
|--------|------|------|------|
| name | string | å¦ | è‡ªå®šä¹‰é—®å€™å¯¹è±¡åç§° |
| lang | string | å¦ | è¯­è¨€ä»£ç (zh/en)ï¼Œé»˜è®¤zh |

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
    "greeting": "æ—©ä¸Šå¥½ï¼æ„¿ä½ çš„ä¸€å¤©å……æ»¡æ´»åŠ›ï¼",
    "mood_index": 85,
    "quote": "æ¯ä¸€ä¸ªæ—¥å‡ºéƒ½æ˜¯æ–°çš„å¼€å§‹ã€‚",
    "timestamp": "2024-01-01 08:30:00"
}
```

#### 2. è·å–æœåŠ¡çŠ¶æ€
```http
GET /api/v1/status
```

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
    "status": "running",
    "uptime": "2h 30m",
    "requests": {
        "total": 1500,
        "success": 1495,
        "error": 5
    },
    "cache": {
        "hits": 450,
        "misses": 1050,
        "hit_rate": "30%"
    },
    "system": {
        "load": "normal",
        "memory_usage": "45%",
        "cpu_usage": "30%"
    }
}
```

### é”™è¯¯ç è¯´æ˜

| é”™è¯¯ç  | æè¿° | è§£å†³æ–¹æ¡ˆ |
|--------|------|----------|
| 200 | è¯·æ±‚æˆåŠŸ | - |
| 400 | å‚æ•°é”™è¯¯ | æ£€æŸ¥è¯·æ±‚å‚æ•°æ˜¯å¦æ­£ç¡® |
| 429 | è¯·æ±‚è¿‡äºé¢‘ç¹ | é™ä½è¯·æ±‚é¢‘ç‡ |
| 500 | æœåŠ¡å™¨å†…éƒ¨é”™è¯¯ | æŸ¥çœ‹æœåŠ¡å™¨æ—¥å¿—æˆ–è”ç³»ç®¡ç†å‘˜ |

### è¯·æ±‚é™åˆ¶
- æ¯ä¸ªIPæ¯åˆ†é’Ÿæœ€å¤š60æ¬¡è¯·æ±‚
- ç¼“å­˜æ—¶é—´ï¼š30ç§’
- æœ€å¤§å“åº”æ—¶é—´ï¼š2ç§’

### æœ€ä½³å®è·µ
1. ä½¿ç”¨åˆé€‚çš„ç¼“å­˜ç­–ç•¥
2. å¤„ç†å¯èƒ½çš„é”™è¯¯å“åº”
3. å®ç°è¯·æ±‚é‡è¯•æœºåˆ¶
4. ç›‘æ§APIä½¿ç”¨æƒ…å†µ

### æ›´æ–°æ—¥å¿—
- v1.2.0: æ·»åŠ å¤šè¯­è¨€æ”¯æŒ
- v1.1.0: æ·»åŠ è‡ªå®šä¹‰åç§°åŠŸèƒ½
- v1.0.0: åˆå§‹ç‰ˆæœ¬å‘å¸ƒ

## å‚ä¸è´¡çŒ®

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼Œæ— è®ºæ˜¯æ–°åŠŸèƒ½ã€bugä¿®å¤è¿˜æ˜¯æ–‡æ¡£æ”¹è¿›ã€‚

### è´¡çŒ®æ­¥éª¤

1. Fork é¡¹ç›®
2. åˆ›å»ºæ–°çš„åˆ†æ”¯
   ```bash
   git checkout -b feature/your-feature
   ```
3. æäº¤ä½ çš„ä¿®æ”¹
   ```bash
   git commit -m 'Add some feature'
   ```
4. æ¨é€åˆ°åˆ†æ”¯
   ```bash
   git push origin feature/your-feature
   ```
5. åˆ›å»º Pull Request

### å¼€å‘æŒ‡å—

1. ä»£ç é£æ ¼
   - éµå¾ª PEP 8 è§„èŒƒ
   - ä½¿ç”¨æ¸…æ™°çš„å˜é‡å’Œå‡½æ•°å‘½å
   - æ·»åŠ å¿…è¦çš„æ³¨é‡Š
   - ä¿æŒä»£ç ç®€æ´

2. æäº¤è§„èŒƒ
   - feat: æ–°åŠŸèƒ½
   - fix: ä¿®å¤bug
   - docs: æ–‡æ¡£æ›´æ–°
   - style: ä»£ç æ ¼å¼åŒ–
   - refactor: ä»£ç é‡æ„
   - test: æµ‹è¯•ç›¸å…³
   - chore: å…¶ä»–ä¿®æ”¹

3. æµ‹è¯•è¦æ±‚
   - æ·»åŠ å•å…ƒæµ‹è¯•
   - ç¡®ä¿æ‰€æœ‰æµ‹è¯•é€šè¿‡
   - æµ‹è¯•è¦†ç›–ç‡ä¸ä½äº80%

### é—®é¢˜åé¦ˆ

- ä½¿ç”¨ GitHub Issues æäº¤é—®é¢˜
- æè¿°æ¸…æ¥šé—®é¢˜çš„å¤ç°æ­¥éª¤
- æä¾›å¿…è¦çš„ç¯å¢ƒä¿¡æ¯
- é™„ä¸Šç›¸å…³çš„æ—¥å¿—æˆ–æˆªå›¾


## è”ç³»æˆ‘ä»¬

- é¡¹ç›®ä¸»é¡µï¼šhttps://github.com/oasb/greetapi
- é—®é¢˜åé¦ˆï¼šhttps://github.com/oasb/greetapi/issues
- æŠ€æœ¯æ”¯æŒï¼šsupport@api.oasb.cn

### æœåŠ¡å¯åŠ¨

#### å¼€å‘ç¯å¢ƒ (å¸¦è°ƒè¯•åŠŸèƒ½)
```bash
python main.py --debug
```
ç‰¹ç‚¹ï¼š
- è‡ªåŠ¨é‡è½½ä»£ç ä¿®æ”¹
- æ˜¾ç¤ºè¯¦ç»†é”™è¯¯ä¿¡æ¯
- è¾“å‡ºæ›´å¤šè°ƒè¯•æ—¥å¿—

#### ç”Ÿäº§ç¯å¢ƒ (æ¨èé…ç½®)
```bash
python main.py --host 0.0.0.0 --port 5000
```
ç‰¹ç‚¹ï¼š
- æ›´é«˜æ€§èƒ½
- æ›´å®‰å…¨
- é€‚åˆé•¿æœŸè¿è¡Œ

#### å¸¸ç”¨å‚æ•°è¯´æ˜
| å‚æ•° | è¯´æ˜ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|-------|------|
| `--host` | ç›‘å¬åœ°å€ | 127.0.0.1 | `--host 0.0.0.0` |
| `--port` | ç›‘å¬ç«¯å£ | 5000 | `--port 8080` |
| `--debug` | è°ƒè¯•æ¨¡å¼ | False | `--debug` |
| `--keep-stats` | ä¿ç•™ç»Ÿè®¡ | False | `--keep-stats` |

#### å…¸å‹åœºæ™¯ç¤ºä¾‹

1. æœ¬åœ°å¼€å‘æµ‹è¯•ï¼š
```bash
python main.py --debug --port 8000
```

2. ç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼š
```bash
python main.py --host 0.0.0.0 --port 80 --keep-stats
```

3. æŸ¥çœ‹å¸®åŠ©ï¼š
```bash
python main.py --help
```

3. è®¿é—®APIï¼š

æœ¬åœ°è®¿é—®ï¼š
```
http://localhost:5000/api/greeting?name=å°æ˜
```

ä»å…¶ä»–è®¾å¤‡è®¿é—®ï¼š
```
http://<æœåŠ¡å™¨IP>:5000/api/greeting?name=å°æ˜
```

æ³¨æ„äº‹é¡¹ï¼š
- ç¡®ä¿é˜²ç«å¢™å…è®¸å¯¹åº”ç«¯å£çš„è®¿é—®
- å¦‚æœä½¿ç”¨äº‘æœåŠ¡å™¨ï¼Œéœ€è¦åœ¨å®‰å…¨ç»„ä¸­å¼€æ”¾å¯¹åº”ç«¯å£
- å»ºè®®åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨åå‘ä»£ç†ï¼ˆå¦‚Nginxï¼‰æ¥æä¾›æœåŠ¡

## APIæ–‡æ¡£ ğŸš€

### åŸºç¡€é—®å€™æ¥å£

#### è¯·æ±‚ä¿¡æ¯
- **æ¥å£**: `/api/greeting`
- **æ–¹æ³•**: GET
- **æè¿°**: è·å–ä¸ªæ€§åŒ–çš„é—®å€™è¯­å’Œæ¨èå†…å®¹

#### è¯·æ±‚å‚æ•°

| å‚æ•°å | ç±»å‹ | å¿…å¡« | è¯´æ˜ | ç¤ºä¾‹ |
|--------|------|------|------|------|
| name | string | å¦ | ç”¨æˆ·åç§° | å°æ˜ |
| favorite | string | å¦ | ç”¨æˆ·å…´è¶£ï¼ˆå¯é€‰å€¼ï¼šmusic/sports/foodï¼‰ | music |

#### å“åº”æ ¼å¼

**æˆåŠŸå“åº”** (200 OK)
```json
{
  "code": 200,
  "status": "success",
  "data": {
    "greeting": "ä¸‹åˆå¥½ ğŸŒ¤ï¸ å¾ˆé«˜å…´è§åˆ°ä½  ğŸŒˆ, å°æ˜ï¼",
    "mood": "92% ğŸ˜Š",
    "tip": "è®°å¾—å–æ°´å“¦ ğŸ’§",
    "quote": "ç”Ÿæ´»å°±åƒä¸€ç›’å·§å…‹åŠ›ï¼Œä½ æ°¸è¿œä¸çŸ¥é“ä¸‹ä¸€å—æ˜¯ä»€ä¹ˆå‘³é“ ğŸ«",
    "recommendation": "ğŸµ å¬è¯´ä½ å–œæ¬¢éŸ³ä¹ï¼Œä»Šå¤©æ¨è: ã€Šå¹³å‡¡ä¹‹è·¯ã€‹"
  },
  "meta": {
    "api_version": "v1.2.0",
    "session_id": "a1b2c3d4",
    "timestamp": "2024-11-15 14:30:22"
  }
}
```

**é”™è¯¯å“åº”** (400 Bad Request)
```json
{
  "code": 400,
  "status": "error",
  "error": {
    "type": "ValidationError",
    "message": "å‚æ•°é”™è¯¯",
    "details": "favoriteå‚æ•°åªèƒ½æ˜¯music/sports/foodä¸­çš„ä¸€ä¸ª"
  }
}
```

#### è°ƒç”¨ç¤ºä¾‹

**Python**
```python
import requests

def get_greeting(name=None, favorite=None):
    params = {}
    if name:
        params['name'] = name
    if favorite:
        params['favorite'] = favorite
    
    response = requests.get(
        'http://localhost:5000/api/greeting',
        params=params
    )
    return response.json()

# åŸºç¡€è°ƒç”¨
print(get_greeting())

# å¸¦å‚æ•°è°ƒç”¨
print(get_greeting(name="å°æ˜", favorite="music"))
```

**JavaScript**
```javascript
// ä½¿ç”¨Fetch API
async function getGreeting(name, favorite) {
  const params = new URLSearchParams();
  if (name) params.append('name', name);
  if (favorite) params.append('favorite', favorite);

  const response = await fetch(
    `http://localhost:5000/api/greeting?${params.toString()}`
  );
  return await response.json();
}

// åŸºç¡€è°ƒç”¨
getGreeting().then(console.log);

// å¸¦å‚æ•°è°ƒç”¨
getGreeting('å°æ˜', 'music').then(console.log);
```

**curl**
```bash
# åŸºç¡€è°ƒç”¨
curl "http://localhost:5000/api/greeting"

# å¸¦å‚æ•°è°ƒç”¨
curl "http://localhost:5000/api/greeting?name=å°æ˜&favorite=music"
```

## è´¡çŒ®æŒ‡å—

æ¬¢è¿æäº¤Pull Requestæˆ–IssueæŠ¥å‘Šé—®é¢˜ã€‚

## è®¸å¯è¯

MIT
