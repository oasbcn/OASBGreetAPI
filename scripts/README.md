# 工具脚本说明

## 配置管理工具 (config_manager.py)

配置管理工具用于创建、验证和管理服务配置文件。

### 功能特性

1. 配置文件验证
   - JSON格式检查
   - 配置项有效性验证
   - 安全性检查
   - 性能优化建议

2. 配置生成向导
   - 交互式配置创建
   - 默认值提示
   - 输入验证
   - 自动格式化

3. 配置检查报告
   - 错误提示
   - 警告信息
   - 优化建议
   - 验证状态

### 使用方法

#### 1. 创建新配置
```bash
# 创建新的配置文件
python config_manager.py --create config.json

# 使用向导模式创建配置
python config_manager.py -c config.json
```

#### 2. 验证配置
```bash
# 验证现有配置文件
python config_manager.py --validate config.json

# 简写方式验证
python config_manager.py -v config.json
```

### 配置验证规则

#### 服务器配置
- 端口号必须在1-65535之间
- 生产环境不建议启用debug模式
- host为0.0.0.0时会显示安全提醒

#### 日志配置
- 日志级别必须是有效值
- 文件路径必须可写
- 建议启用日志轮转
- 最大文件大小格式必须正确

#### 监控配置
- 监控间隔不应小于10秒
- 数据保留时间建议不超过90天
- CPU阈值不应超过90%
- 必须指定有效的存储目录

#### 安全配置
- 建议启用XSS保护
- 建议启用HSTS
- 请求限制不应过于严格或宽松
- 建议启用所有安全响应头

### 示例输出

#### 验证成功
```
正在验证配置文件: config.json

⚠️ 注意事项:
  • 监控间隔(5秒)可能过短，建议设置为至少10秒
  • 建议启用XSS保护

✅ 配置文件验证通过！
```

#### 验证失败
```
正在验证配置文件: config.json

❌ 发现错误:
  • 无效的端口号: 70000，端口号必须在1-65535之间
  • 日志文件路径不能为空

⚠️ 注意事项:
  • debug模式已启用，不建议在生产环境中使用
```

### 最佳实践

1. 配置文件管理
   - 使用版本控制管理配置模板
   - 不要提交包含敏感信息的配置
   - 定期验证配置有效性
   - 保持配置文件的整洁和注释

2. 安全建议
   - 生产环境禁用调试模式
   - 使用严格的安全头部
   - 配置合理的请求限制
   - 定期更新安全策略

3. 性能优化
   - 根据实际需求调整监控间隔
   - 合理设置日志级别
   - 配置适当的缓存策略
   - 定期清理监控数据

4. 维护建议
   - 定期检查配置有效性
   - 保持配置文件的可读性
   - 记录配置变更历史
   - 建立配置备份机制

### 常见问题

1. 配置验证失败
   ```
   Q: 为什么配置验证显示端口号无效？
   A: 端口号必须是1-65535之间的整数。
   ```

2. 日志配置问题
   ```
   Q: 为什么建议启用日志轮转？
   A: 防止日志文件过大占用磁盘空间。
   ```

3. 监控配置
   ```
   Q: 监控间隔设置多少合适？
   A: 建议在10-60秒之间，根据实际需求调整。
   ```

4. 安全配置
   ```
   Q: 为什么建议启用所有安全头部？
   A: 提供更好的安全性保护，防止常见的Web攻击。
   ```

### 更新日志

- v1.0.0 (2024-01-15)
  * 初始版本发布
  * 支持基本的配置验证和创建
  * 添加配置检查报告功能

- v1.1.0 (2024-01-20)
  * 添加配置生成向导
  * 改进验证规则
  * 添加更多安全检查

### 贡献指南

1. 报告问题
   - 使用GitHub Issues报告问题
   - 提供完整的错误信息
   - 描述复现步骤

2. 提交改进
   - Fork项目仓库
   - 创建功能分支
   - 提交Pull Request

### 许可证

MIT License - 详见项目根目录的LICENSE文件